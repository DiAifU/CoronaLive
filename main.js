!function(e){function s(s){for(var n,o,i=s[0],l=s[1],c=s[2],j=0,u=[];j<i.length;j++)o=i[j],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(d&&d(s);u.length;)u.shift()();return a.push.apply(a,c||[]),t()}function t(){for(var e,s=0;s<a.length;s++){for(var t=a[s],n=!0,i=1;i<t.length;i++){var l=t[i];0!==r[l]&&(n=!1)}n&&(a.splice(s--,1),e=o(o.s=t[0]))}return e}var n={},r={0:0},a=[];function o(s){if(n[s])return n[s].exports;var t=n[s]={i:s,l:!1,exports:{}};return e[s].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=n,o.d=function(e,s,t){o.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,s){if(1&s&&(e=o(e)),8&s)return e;if(4&s&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&s&&"string"!=typeof e)for(var n in e)o.d(t,n,function(s){return e[s]}.bind(null,n));return t},o.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(s,"a",s),s},o.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=s,i=i.slice();for(var c=0;c<i.length;c++)s(i[c]);var d=l;a.push([134,1]),t()}({133:function(e,s,t){var n={"./af":3,"./af.js":3,"./ar":4,"./ar-dz":5,"./ar-dz.js":5,"./ar-kw":6,"./ar-kw.js":6,"./ar-ly":7,"./ar-ly.js":7,"./ar-ma":8,"./ar-ma.js":8,"./ar-sa":9,"./ar-sa.js":9,"./ar-tn":10,"./ar-tn.js":10,"./ar.js":4,"./az":11,"./az.js":11,"./be":12,"./be.js":12,"./bg":13,"./bg.js":13,"./bm":14,"./bm.js":14,"./bn":15,"./bn.js":15,"./bo":16,"./bo.js":16,"./br":17,"./br.js":17,"./bs":18,"./bs.js":18,"./ca":19,"./ca.js":19,"./cs":20,"./cs.js":20,"./cv":21,"./cv.js":21,"./cy":22,"./cy.js":22,"./da":23,"./da.js":23,"./de":24,"./de-at":25,"./de-at.js":25,"./de-ch":26,"./de-ch.js":26,"./de.js":24,"./dv":27,"./dv.js":27,"./el":28,"./el.js":28,"./en-SG":29,"./en-SG.js":29,"./en-au":30,"./en-au.js":30,"./en-ca":31,"./en-ca.js":31,"./en-gb":32,"./en-gb.js":32,"./en-ie":33,"./en-ie.js":33,"./en-il":34,"./en-il.js":34,"./en-nz":35,"./en-nz.js":35,"./eo":36,"./eo.js":36,"./es":37,"./es-do":38,"./es-do.js":38,"./es-us":39,"./es-us.js":39,"./es.js":37,"./et":40,"./et.js":40,"./eu":41,"./eu.js":41,"./fa":42,"./fa.js":42,"./fi":43,"./fi.js":43,"./fo":44,"./fo.js":44,"./fr":45,"./fr-ca":46,"./fr-ca.js":46,"./fr-ch":47,"./fr-ch.js":47,"./fr.js":45,"./fy":48,"./fy.js":48,"./ga":49,"./ga.js":49,"./gd":50,"./gd.js":50,"./gl":51,"./gl.js":51,"./gom-latn":52,"./gom-latn.js":52,"./gu":53,"./gu.js":53,"./he":54,"./he.js":54,"./hi":55,"./hi.js":55,"./hr":56,"./hr.js":56,"./hu":57,"./hu.js":57,"./hy-am":58,"./hy-am.js":58,"./id":59,"./id.js":59,"./is":60,"./is.js":60,"./it":61,"./it-ch":62,"./it-ch.js":62,"./it.js":61,"./ja":63,"./ja.js":63,"./jv":64,"./jv.js":64,"./ka":65,"./ka.js":65,"./kk":66,"./kk.js":66,"./km":67,"./km.js":67,"./kn":68,"./kn.js":68,"./ko":69,"./ko.js":69,"./ku":70,"./ku.js":70,"./ky":71,"./ky.js":71,"./lb":72,"./lb.js":72,"./lo":73,"./lo.js":73,"./lt":74,"./lt.js":74,"./lv":75,"./lv.js":75,"./me":76,"./me.js":76,"./mi":77,"./mi.js":77,"./mk":78,"./mk.js":78,"./ml":79,"./ml.js":79,"./mn":80,"./mn.js":80,"./mr":81,"./mr.js":81,"./ms":82,"./ms-my":83,"./ms-my.js":83,"./ms.js":82,"./mt":84,"./mt.js":84,"./my":85,"./my.js":85,"./nb":86,"./nb.js":86,"./ne":87,"./ne.js":87,"./nl":88,"./nl-be":89,"./nl-be.js":89,"./nl.js":88,"./nn":90,"./nn.js":90,"./pa-in":91,"./pa-in.js":91,"./pl":92,"./pl.js":92,"./pt":93,"./pt-br":94,"./pt-br.js":94,"./pt.js":93,"./ro":95,"./ro.js":95,"./ru":96,"./ru.js":96,"./sd":97,"./sd.js":97,"./se":98,"./se.js":98,"./si":99,"./si.js":99,"./sk":100,"./sk.js":100,"./sl":101,"./sl.js":101,"./sq":102,"./sq.js":102,"./sr":103,"./sr-cyrl":104,"./sr-cyrl.js":104,"./sr.js":103,"./ss":105,"./ss.js":105,"./sv":106,"./sv.js":106,"./sw":107,"./sw.js":107,"./ta":108,"./ta.js":108,"./te":109,"./te.js":109,"./tet":110,"./tet.js":110,"./tg":111,"./tg.js":111,"./th":112,"./th.js":112,"./tl-ph":113,"./tl-ph.js":113,"./tlh":114,"./tlh.js":114,"./tr":115,"./tr.js":115,"./tzl":116,"./tzl.js":116,"./tzm":117,"./tzm-latn":118,"./tzm-latn.js":118,"./tzm.js":117,"./ug-cn":119,"./ug-cn.js":119,"./uk":120,"./uk.js":120,"./ur":121,"./ur.js":121,"./uz":122,"./uz-latn":123,"./uz-latn.js":123,"./uz.js":122,"./vi":124,"./vi.js":124,"./x-pseudo":125,"./x-pseudo.js":125,"./yo":126,"./yo.js":126,"./zh-cn":127,"./zh-cn.js":127,"./zh-hk":128,"./zh-hk.js":128,"./zh-tw":129,"./zh-tw.js":129};function r(e){var s=a(e);return t(s)}function a(e){if(!t.o(n,e)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=a,e.exports=r,r.id=133},134:function(e,s,t){"use strict";t.r(s);var n={casConfirmes:"Cas confirmés",deces:"Décès",hospitalises:"Hospitalisés",reanimation:"Réanimation",gueris:"Guéris",decesEhpad:"Décès en Ephad",depistes:"Dépistés"},r=t(130),a=t(1),o=t.n(a);let i=null;const l=o.a.invert(n),c=(e,s,t=[])=>{if(null===i)throw"Chart was not previously built";const r=o.a.sortBy(Object.keys(e)),a=o.a.union(o.a.flatMap(e,e=>Object.keys(e))),l=o.a.orderBy(a.map(a=>({label:n[a],backgroundColor:d(a),borderColor:d(a),data:r.map(t=>e[t][a]?"delta"==s?e[t][a].diff:"moyGliss7jours"==s?e[t][a].moyGliss7jours:e[t][a][0].value:null),borderWidth:1,hidden:t.includes(a)})),e=>e.data[e.data.length-1]);i.data={labels:r,datasets:l},i.update()},d=e=>{for(var s=0,t=0;t<e.length;t++)s=e.charCodeAt(t)+((s<<5)-s);var n="#";for(t=0;t<3;t++){n+=("00"+(s>>8*t&255).toString(16)).substr(-2)}return n};var j=t(131),u=t(1);Date.prototype.addDays=function(e){var s=new Date(this.valueOf());return s.setDate(s.getDate()+e),s};const f=e=>{const s={weekday:"long",year:"numeric",month:"long",day:"numeric"},t=s=>u.reduce(Object.keys(e[s]),(t,r)=>t+`\n    <span style="font-style: italic;margin-left: 20px;display: inline-block;width: 140px;vertical-align: top;">${n[r]} :</span> ${((s,t)=>'<div style="display: inline-block;">'+u.reduce(e[s][t],(n,r)=>{const{sources:a,value:o}=r;var i=new Date(s).addDays(-1).toISOString().substring(0,10);const l=e[i]&&e[i][t]?{diff:o-e[i][t][0].value,diffPercent:100*(o-e[i][t][0].value)/o}:null;return`${n?n+"<br />":""}<span style="font-weight: bold;margin-left: 5px;margin-right: 5px;">${o} ${l?`(${l.diffPercent>0?"+":""}${l.diff}, ${l.diffPercent>0?"+":""}${l.diffPercent.toString().slice(0,4)}%)`:""}</span> (${a.join(", ")})`},"")+"</div>")(s,r)}<br/>\n`,"");let r=u.reduce(Object.keys(e),(e,n)=>e+`\n\n  <li class="list-group-item">\n    <h3>${new Date(n).toLocaleString("fr",s)}</h3>\n\n    `+t(n)+"\n  </li>","");return r=`<ul class="list-group">${r}</ul>`,r},m=e=>{const s=window.location.href.split("?")[0];e?history.pushState({},null,`${s}?${e}`):history.pushState({},null,s)};!async function(){var e=new URLSearchParams(window.location.search);const s=e.get("code")||"FRA",t=["normal","delta","moyGliss7jours"];let n=e.has("hidden")?e.get("hidden").split(","):[];const a=e.has("from")?new Date(e.get("from")):new Date("2020-01-01"),o=await(async e=>{const s=await j("https://raw.githubusercontent.com/opencovid19-fr/data/master/dist/chiffres-cles.json");let t=await s.json();t=u.filter(t,s=>s.code===e),t=u.map(t,({date:e,casConfirmes:s,hospitalises:t,deces:n,reanimation:r,gueris:a,decesEhpad:o,depistes:i,source:{nom:l}})=>({date:e,casConfirmes:s,hospitalises:t,deces:n,decesEhpad:o,reanimation:r,gueris:a,depistes:i,sourceNom:l})),t=u.forEach(t,e=>e.date=e.date.replace("_","-")),t=u.orderBy(t,e=>e.date,"desc"),t=u.groupBy(t,e=>e.date);let n={};for(let e in t){const s={};t[e].forEach(({date:e,...t})=>{Object.keys(t).forEach(e=>{const n=parseInt(t[e]);if(!isNaN(n))if(s[e]){const r=u.findIndex(s[e],e=>e.value===n);-1!=r?s[e][r].sources.push(t.sourceNom):s[e].push({sources:[t.sourceNom],value:n})}else s[e]=[{sources:[t.sourceNom],value:n}]})}),n={...n,[e]:s}}return Object.keys(n).forEach(e=>{var s=new Date(e);const t=n[e];for(let e=1;e<8;e++){var r=s.addDays(-e).toISOString().substring(0,10),a=n[r];if(!a)break;Object.keys(t).forEach(s=>{a[s]&&(1==e&&(t[s].diff=t[s][0].value-a[s][0].value),t[s].moyGliss7jours=(t[s].moyGliss7jours||0)+a[s][0].value)})}Object.keys(t).forEach(e=>t[e].moyGliss7jours=Math.round(t[e].moyGliss7jours/7))}),n})(s);console.log(o),console.log(a);var d=Object.keys(o).reduce((e,s)=>new Date(s)>a?{...e,[s]:o[s]}:e,{});console.log(d);const p=document.querySelector("#root");p.innerHTML=p.innerHTML+f(d);function h(s){s!=t[0]?e.set("mode",s):e.delete("mode"),m(e.toString().replace(/%2C/g,",")),c(d,s,n),document.getElementById(s).parentElement.classList.add("active"),u.forEach(t.filter(e=>e!=s),e=>{document.getElementById(e).parentElement.classList.remove("active")})}((e,s)=>{i=new r.Chart(e,{type:"line",options:{tooltips:{intersect:!1,mode:"index"},legend:{onClick:(e,t)=>{if(s){var n=i.data.datasets[t.datasetIndex];s(l[n.label],!1===n.hidden)}}},animation:{duration:0}}})})(document.getElementById("chart").getContext("2d"),(s,t)=>{t?n.includes(s)||(n=[...n,s]):n.includes(s)&&(n=n.filter(e=>e!==s)),n.length>0?e.set("hidden",n.join(",")):e.delete("hidden"),m(e.toString().replace(/%2C/g,",")),c(d,g,n)}),normal.addEventListener("click",()=>h("normal")),delta.addEventListener("click",()=>h("delta")),moyGliss7jours.addEventListener("click",()=>h("moyGliss7jours"));const y=e.get("mode"),g=y?u.find(t,e=>e==y):t[0];c(d,g,n)}()}});